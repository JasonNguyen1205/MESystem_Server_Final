@page "/checkstock"
@using MESystem.LabelComponents
@if (!ShowPopUpFamily)
{
    <div style="text-align: right;">
          <DxButton Click=@ExportExcel Enabled="@(ListStockByFamily.Count() > 0)" CssClass="btn btn-warning" Text="Export Excel" />
    </div>
    <div style="text-align: center;">
        <div class="shadow px-0 mb-0 bg-white rounded">
            <div class="card-body">
                <div class="m-12 d-block">
                                <DxDataGrid Data="@ListStockByFamily"
                                        CssClass="cw-100 m-auto overflow-y-auto"
                                        ShowFilterRow="true" 
                                        AllowSort="true"
                                        PageIndex="50"
                                        InnerComponentSizeMode="SizeMode.Small"
                                        AutoCollapseDetailRow="true">
                                    <DxDataGridColumn TextAlignment="DataGridTextAlign.Center" Field="@nameof(StockByFamily.PartNo)" Width="80px" Caption="Part No" />
                                    <DxDataGridColumn TextAlignment="DataGridTextAlign.Center" Field="@nameof(StockByFamily.OrderNo)" Width="80px" Caption="Customer Part No" />
                                    <DxDataGridColumn TextAlignment="DataGridTextAlign.Center" Field="@nameof(StockByFamily.Stock)" Width="80px" Caption="Stock " />
                                    <DxDataGridColumn TextAlignment="DataGridTextAlign.Center" Field="@nameof(StockByFamily.Revision)" Width="80px" Caption="Customer Version" />
                                    <DxDataGridColumn TextAlignment="DataGridTextAlign.Center" Field="@nameof(StockByFamily.Invoice)" Width="80px" Caption="PO" />
                                </DxDataGrid>
                    
                </div>
            </div>
        </div>
    </div>
}

<div class="container">
    <div class="row">
        <div class="col-3"></div>
        <div class="col-6">
            <h5 style="text-align: left; padding-top: 50px;">
                <InfosField CssTextColor="@InfoCssColor" Result="@Result" Contents="@Infofield" HighlightMsg="@HighlightMsg"></InfosField>
            </h5>
        </div>
        <div class="col-3"></div>
    </div>
</div>

<DxPopup @bind-Visible="@ShowPopUpFamily"
         CloseOnEscape="true"
         CloseOnOutsideClick="true"
         ShowCloseButton="true"
         ShowFooter="true"
         HeaderText="Choose Family"
         Closing="PopupClosing">
    <BodyContentTemplate>
        <DxComboBox Id="ChooseFamily"
                    NullText="Select Family ..."
                    Data="@FamilyList"
                    TData="@(Family)"
                    TValue="@(Family)"
                    SelectedItemChanged="@GetFamily"
                    AllowUserInput="true"
                    ListRenderMode="ListRenderMode.Virtual"
                    FilteringMode="DataGridFilteringMode.StartsWith"
                    TextFieldName="@nameof(Family.family)"
                    ClearButtonDisplayMode="DataEditorClearButtonDisplayMode.Auto"
                    CssClass="cw-320" />
    </BodyContentTemplate>
    <FooterContentTemplate>
        <DxButton RenderStyle="ButtonRenderStyle.Primary" Text="OK"
                  Click="@context.CloseCallback" />
    </FooterContentTemplate>
</DxPopup>
